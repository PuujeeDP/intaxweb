# –ê–∂–ª—ã–Ω –¢–∞–π–ª–∞–Ω - 2025-10-24

## –•–∏–π–≥–¥—Å—ç–Ω “Æ–Ω–¥—Å—ç–Ω –ê–∂–ª—É—É–¥

### 1. Company History (–ö–æ–º–ø–∞–Ω–∏–π–Ω –¢“Ø“Ø—Ö) Feature - –ë“Ø—Ä—ç–Ω –•—ç—Ä—ç–≥–∂“Ø“Ø–ª—ç–ª—Ç

#### Backend –•—ç—Ä—ç–≥–∂“Ø“Ø–ª—ç–ª—Ç

**Database & Models:**
- `company_histories` table migration “Ø“Ø—Å–≥—ç–∂, –∞–∂–∏–ª–ª—É—É–ª—Å–∞–Ω
  - –¢–∞–ª–±–∞—Ä—É—É–¥: `id`, `year` (unique), `image_id`, `is_active`, `order`, `timestamps`
- `CompanyHistory` model “Ø“Ø—Å–≥—ç—Å—ç–Ω
  - `Translatable` trait –∞—à–∏–≥–ª–∞—Å–∞–Ω (title, description - EN/MN/ZH)
  - Relationships: `belongsTo(Media::class, 'image')`
  - Scopes: `active()`, `ordered()`
- `CompanyHistorySeeder` “Ø“Ø—Å–≥—ç–∂, 10 –∂–∏—à—ç—ç ”©–≥”©–≥–¥”©–ª (2005-2025) seed —Ö–∏–π—Å—ç–Ω

**Controllers:**
- `App\Http\Controllers\Admin\CompanyHistoryController` - –ë“Ø—Ä—ç–Ω CRUD
  - `index()` - Pagination –±“Ø—Ö–∏–π –∂–∞–≥—Å–∞–∞–ª—Ç
  - `create()` - –®–∏–Ω—ç “Ø“Ø—Å–≥—ç—Ö —Ñ–æ—Ä–º
  - `store()` - Validation + 3 —Ö—ç–ª –¥—ç—ç—Ä—Ö translation —Ö–∞–¥–≥–∞–ª–∞—Ö
  - `edit()` - –ó–∞—Å–∞—Ö —Ñ–æ—Ä–º (translation-—É—É–¥ –¥–∞—Ö–∏–Ω –∞—á–∞–∞–ª–∞—Ö)
  - `update()` - –®–∏–Ω—ç—á–ª—ç—Ö
  - `destroy()` - –£—Å—Ç–≥–∞—Ö
- `App\Http\Controllers\Frontend\CompanyHistoryController` - Frontend —Ö–∞—Ä—É—É–ª–∞–ª—Ç

**Routes:**
- Admin: `/admin/company-histories/*` (resource routes except show)
- Frontend: `/{locale}/history` (mn/en/zh)

**Service Provider:**
- `AppServiceProvider` –¥—ç—ç—Ä explicit route model binding –Ω—ç–º—Å—ç–Ω

---

#### Frontend Admin Panel (React + Inertia.js)

**“Æ“Ø—Å–≥—ç—Å—ç–Ω –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—É—É–¥:**
1. **Index.jsx** (`resources/js/Pages/Admin/CompanyHistories/Index.jsx`)
   - Table –±“Ø—Ö–∏–π –∂–∞–≥—Å–∞–∞–ª—Ç (year, title, image, status, order)
   - Edit/Delete —Ç–æ–≤—á–Ω—É—É–¥
   - Pagination
   - Empty state

2. **Form.jsx** (`resources/js/Pages/Admin/CompanyHistories/Form.jsx`)
   - Year input
   - LanguageTabs –∞—à–∏–≥–ª–∞—Å–∞–Ω 3 —Ö—ç–ª–Ω–∏–π –æ—Ä—á—É—É–ª–≥–∞ (EN/MN/ZH)
     - Title inputs
     - Description textareas
   - **–ó—É—Ä–≥–∏–π–Ω upload —Ñ—É–Ω–∫—Ü:**
     - Drag & drop –¥—ç–º–∂—Å—ç–Ω file input
     - Upload progress spinner
     - Image preview with remove button
     - Media API –∞—à–∏–≥–ª–∞–∂ –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä —Ö–∞–¥–≥–∞–ª–Ω–∞
   - Order input
   - Active/Inactive checkbox
   - Cancel/Save —Ç–æ–≤—á–Ω—É—É–¥

3. **Create.jsx** (`resources/js/Pages/Admin/CompanyHistories/Create.jsx`)
   - Form –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏–π–≥ –∞—à–∏–≥–ª–∞—Å–∞–Ω wrapper

4. **Edit.jsx** (`resources/js/Pages/Admin/CompanyHistories/Edit.jsx`)
   - ”®–≥”©–≥–¥”©–ª –¥–∞—Ö–∏–Ω –∞—á–∞–∞–ª—Å–∞–Ω Form wrapper

**Admin Layout:**
- `AppLayout.jsx` –¥—ç—ç—Ä "Company History" üìÖ —Ü—ç—Å –Ω—ç–º—Å—ç–Ω

---

#### Frontend Public Timeline (Blade + Tailwind)

**Timeline –•—É—É–¥–∞—Å** (`resources/views/frontend/history/index.blade.php`)

**–î–∏–∑–∞–π–Ω—ã –û–Ω—Ü–ª–æ–≥:**
- **Hero Section:**
  - Green gradient background (from-green-600 via-green-700 to-emerald-900)
  - Animated background blobs (3 floating elements)
  - Badge + —Ç–æ–º –≥–∞—Ä—á–∏–≥ + subtitle
  - Wave transition bottom

- **Timeline Section:**
  - Vertical timeline –¥–∏–∑–∞–π–Ω (desktop)
  - Left/right –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ –±–∞–π—Ä–ª–∞–ª
  - **Timeline —ç–ª–µ–º–µ–Ω—Ç“Ø“Ø–¥:**
    - Green gradient center line
    - Year badges (w-24 h-24, green gradient, white border)
    - Hover pulse effect
    - Content cards:
      - Rounded corners (rounded-2xl)
      - Image support (h-56, zoom on hover)
      - Green gradient overlay on hover
      - Top accent bar animation
      - "Milestone" badge + checkmark icon
      - Title + description
      - Border hover effects
  - Fade-in-up animations (staggered delays)
  - Pagination support
  - Mobile responsive (simplified layout)

- **CTA Section:**
  - Green gradient background
  - Icon header
  - Contact Us / Learn More buttons
  - Arrow animations on hover

**”®–Ω–≥”©–Ω–∏–π –°—Ö–µ–º:**
- “Æ–Ω–¥—Å—ç–Ω ”©–Ω–≥”©: Green (—Å–∞–π—Ç—ã–Ω brand ”©–Ω–≥”©)
- Gradient: from-green-600 via-green-700 to-emerald-900
- Accent: emerald-400, green-500
- Hover states: green-700, green-100

---

### 2. Media Model –ó–∞—Å–≤–∞—Ä—É—É–¥

**–ê—Å—É—É–¥–∞–ª:**
- –ê–Ω—Ö `path` accessor override —Ö–∏–π—Å—ç–Ω –Ω—å –±“Ø—Ö —Ö—É—É—á–∏–Ω –∑—É—Ä–≥—É—É–¥—ã–≥ –∞–ª–¥–∞–∞—Ç–∞–π –±–æ–ª–≥–æ—Å–æ–Ω
- URL –¥–∞–≤—Ö–∞—Ä–¥–∞–∂ –±–∞–π—Å–∞–Ω (`/storage/storage/uploads/...`)

**–®–∏–π–¥—ç–ª:**
```php
// File: app/Models/Media.php

protected $appends = ['file_path'];

public function getFilePathAttribute()
{
    return $this->url; // –ë“Ø—Ç—ç–Ω URL –±—É—Ü–∞–∞–Ω–∞
}

public function getUrlAttribute(): string
{
    $disk = Storage::disk($this->disk);
    return $disk->url($this->path); // /storage/uploads/filename.png
}
```

**–û–¥–æ–æ–≥–∏–π–Ω –ê–∂–∏–ª–ª–∞–≥–∞–∞:**
- `path` - Database —É—Ç–≥–∞ (`uploads/filename.png`)
- `file_path` - Accessor, –±“Ø—Ç—ç–Ω URL –±—É—Ü–∞–∞–Ω–∞ (`/storage/uploads/filename.png`)
- `url` - Accessor, –±“Ø—Ç—ç–Ω URL –±—É—Ü–∞–∞–Ω–∞

**–ù–∏–π—Ü—Ç—ç–π –ë–∞–π–¥–∞–ª:**
- ‚úÖ –•—É—É—á–∏–Ω –∑—É—Ä–≥—É—É–¥ (–ª–æ–≥–æ–æ, banner –≥—ç—Ö –º—ç—Ç) –∑”©–≤ –∞–∂–∏–ª–ª–∞–∂ –±–∞–π–Ω–∞
- ‚úÖ –®–∏–Ω—ç –∑—É—Ä–∞–≥ upload –∞–∂–∏–ª–ª–∞–∂ –±–∞–π–Ω–∞
- ‚úÖ –ë“Ø—Ö –±—É—Å–∞–¥ form-—É—É–¥ (Services, Posts, Team –≥—ç—Ö –º—ç—Ç) –∞–∂–∏–ª–ª–∞–∂ –±–∞–π–Ω–∞
- ‚úÖ Company History admin & frontend –∑—É—Ä–≥—É—É–¥ —Ö–∞—Ä–∞–≥–¥–∞–∂ –±–∞–π–Ω–∞

---

### 3. Frontend History Page –ó–∞—Å–≤–∞—Ä

**”®–º–Ω”©—Ö –ê—Å—É—É–¥–∞–ª:**
- Blue ”©–Ω–≥”©—Ç—ç–π –±–∞–π—Å–∞–Ω (—Å–∞–π—Ç—ã–Ω brand-—Ç–∞–π —Ç–∞–∞—Ä–∞—Ö–≥“Ø–π)
- –≠–Ω–≥–∏–π–Ω timeline –¥–∏–∑–∞–π–Ω

**–°–∞–π–∂—Ä—É—É–ª–∞–ª—Ç—É—É–¥:**

1. **”®–Ω–≥”©–Ω–∏–π –°—Ö–µ–º:**
   - Blue ‚Üí Green gradient –±“Ø–≥–¥ —Å–æ–ª–∏–≥–¥—Å–æ–Ω
   - About page-—Ç—ç–π —Ç–∞–∞—Ä—Å–∞–Ω –¥–∏–∑–∞–π–Ω

2. **Hero Section:**
   - –¢–æ–º –≥–∞—Ä—á–∏–≥ (7xl —à—Ä–∏—Ñ—Ç)
   - Badge + subtitle –Ω—ç–º—Å—ç–Ω
   - 3 animated background blobs
   - –ò–ª“Ø“Ø –º—ç–¥—Ä—ç–º–∂—Ç—ç–π animation

3. **Timeline Cards:**
   - –¢–æ–º, –∏–ª“Ø“Ø –∑–∞–¥–≥–∞–π –¥–∏–∑–∞–π–Ω
   - Milestone badge + checkmark icon –Ω—ç–º—Å—ç–Ω
   - Top accent bar animation
   - –ó—É—Ä–≥–∏–π–Ω ”©–Ω–¥”©—Ä –Ω—ç–º—ç–≥–¥—Å—ç–Ω (h-56)
   - Border hover —ç—Ñ—Ñ–µ–∫—Ç –Ω—ç–º—Å—ç–Ω
   - Green gradient overlay
   - –¢–æ–º year badges (w-24 h-24)

4. **CTA Section:**
   - –®–∏–Ω—ç—á–∏–ª—Å—ç–Ω button –¥–∏–∑–∞–π–Ω
   - Arrow icon animations
   - –ò–ª“Ø“Ø –º—ç—Ä–≥—ç–∂–ª–∏–π–Ω —Ö–∞—Ä–∞–≥–¥–∞—Ü

5. **Animations:**
   - Fade-in-up delay-—Ç—ç–π
   - Hover scale —ç—Ñ—Ñ–µ–∫—Ç“Ø“Ø–¥
   - Year badge pulse on hover
   - Image zoom on hover
   - Button arrow slide animations

---

### 4. Route –ó–∞—Å–≤–∞—Ä—É—É–¥

**Admin Routes:**
```php
Route::resource('company-histories', CompanyHistoryController::class)
    ->except(['show']);
```

**Frontend Routes:**
```php
Route::get('history', [FrontendCompanyHistoryController::class, 'index'])
    ->name('history.index');
```

**Locale Support:**
- `/mn/history` - –ú–æ–Ω–≥–æ–ª
- `/en/history` - English
- `/zh/history` - ‰∏≠Êñá

---

## –¢–µ—Ö–Ω–∏–∫–∏–π–Ω –î—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π

### Database Schema
```sql
CREATE TABLE company_histories (
    id BIGINT PRIMARY KEY,
    year INTEGER UNIQUE,
    image_id BIGINT FOREIGN KEY REFERENCES media(id),
    is_active BOOLEAN DEFAULT TRUE,
    order INTEGER DEFAULT 0,
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);
```

### Translation System
- `Translatable` trait –∞—à–∏–≥–ª–∞—Å–∞–Ω
- `translations` table –¥—ç—ç—Ä polymorphic relationship
- 3 —Ö—ç–ª: English (en), Mongolian (mn), Chinese (zh)
- –û—Ä—á—É—É–ª–∞–≥–¥–∞—Ö —Ç–∞–ª–±–∞—Ä—É—É–¥: `title`, `description`

### Media Upload Flow
1. User –∑—É—Ä–∞–≥ —Å–æ–Ω–≥–æ–Ω–æ (drag & drop / click)
2. JavaScript FormData “Ø“Ø—Å–≥—ç–∂ `/admin/media` POST —Ö–∏–π–Ω—ç
3. MediaController –∑—É—Ä–≥–∏–π–≥ `storage/app/public/uploads/` —Ö–∞–¥–≥–∞–ª–Ω–∞
4. Media record “Ø“Ø—Å–≥—ç–∂ ID –±—É—Ü–∞–∞–Ω–∞
5. React state —à–∏–Ω—ç—á–ª—ç–≥–¥—ç–∂ preview —Ö–∞—Ä—É—É–ª–Ω–∞
6. Form submit —Ö–∏–π—Ö—ç–¥ `image_id` —Ö–∞–º—Ç —Ö–∞–¥–≥–∞–ª–∞–≥–¥–∞–Ω–∞

---

## –§–∞–π–ª—ã–Ω –ñ–∞–≥—Å–∞–∞–ª—Ç

### Backend
- `database/migrations/2025_10_24_202716_create_company_histories_table.php`
- `app/Models/CompanyHistory.php`
- `app/Http/Controllers/Admin/CompanyHistoryController.php`
- `app/Http/Controllers/Frontend/CompanyHistoryController.php`
- `database/seeders/CompanyHistorySeeder.php`
- `app/Models/Media.php` (–∑–∞—Å–≤–∞—Ä–ª–∞—Å–∞–Ω)
- `app/Http/Controllers/Admin/MediaController.php` (–∑–∞—Å–≤–∞—Ä–ª–∞—Å–∞–Ω)
- `app/Providers/AppServiceProvider.php` (–∑–∞—Å–≤–∞—Ä–ª–∞—Å–∞–Ω)

### Frontend Admin (React)
- `resources/js/Pages/Admin/CompanyHistories/Index.jsx`
- `resources/js/Pages/Admin/CompanyHistories/Form.jsx`
- `resources/js/Pages/Admin/CompanyHistories/Create.jsx`
- `resources/js/Pages/Admin/CompanyHistories/Edit.jsx`
- `resources/js/Layouts/AppLayout.jsx` (–∑–∞—Å–≤–∞—Ä–ª–∞—Å–∞–Ω)

### Frontend Public (Blade)
- `resources/views/frontend/history/index.blade.php`

### Routes
- `routes/web.php` (–∑–∞—Å–≤–∞—Ä–ª–∞—Å–∞–Ω)

---

## –¢—É—Ä—à–∏–ª—Ç & QA

### –ê–º–∂–∏–ª—Ç—Ç–∞–π –¢—É—Ä—à–∏–≥–¥—Å–∞–Ω:
‚úÖ Company History CRUD (admin panel)
‚úÖ –ó—É—Ä–≥–∏–π–Ω upload & preview
‚úÖ Multi-language translations (EN/MN/ZH)
‚úÖ Frontend timeline —Ö–∞—Ä—É—É–ª–∞–ª—Ç
‚úÖ Responsive –¥–∏–∑–∞–π–Ω (mobile/tablet/desktop)
‚úÖ Animations & hover —ç—Ñ—Ñ–µ–∫—Ç“Ø“Ø–¥
‚úÖ Pagination
‚úÖ –ë—É—Å–∞–¥ —Ö—É—É–¥—Å—É—É–¥—ã–Ω –∑—É—Ä–≥—É—É–¥ (backward compatibility)
‚úÖ Media accessor-—É—É–¥ (path/file_path/url)

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–π–Ω –°—Ç–µ–∫

- **Backend:** Laravel 12, PostgreSQL
- **Admin Panel:** React 18, Inertia.js, Tailwind CSS
- **Frontend:** Blade Templates, Tailwind CSS, Alpine.js
- **Build Tool:** Vite
- **Translations:** Custom Translatable trait
- **File Storage:** Laravel Storage (public disk)

---

## –î–∞—Ä–∞–∞–≥–∏–π–Ω –ê–ª—Ö–º—É—É–¥ (–°–∞–π–∂—Ä—É—É–ª–∞—Ö –ë–æ–ª–æ–º–∂—É—É–¥)

1. ‚≠ê –ó—É—Ä–≥–∏–π–Ω drag & drop order sorting
2. ‚≠ê Bulk delete/activate
3. ‚≠ê Media library modal (–∑—É—Ä–∞–≥ —Ö–∞–π—Ö/—Å–æ–Ω–≥–æ—Ö)
4. ‚≠ê Timeline year filter (frontend)
5. ‚≠ê Export timeline to PDF
6. ‚≠ê SEO meta tags (history page)
7. ‚≠ê Social sharing buttons
8. ‚≠ê Search functionality (admin)

---

## –•”©–≥–∂“Ø“Ø–ª—ç–≥—á–∏–π–Ω –¢—ç–º–¥—ç–≥–ª—ç–ª

- Media model accessor –ª–æ–≥–∏–∫ –∞–Ω—Ö–∞–∞—Ä–ª–∞–∞—Ä —à–∞–ª–≥–∞—Ö —Ö—ç—Ä—ç–≥—Ç—ç–π –±–∞–π—Å–∞–Ω
- `file_path` –Ω—å `url` accessor —Ä—É—É —á–∏–≥–ª“Ø“Ø–ª—Å—ç–Ω –Ω—å backward compatibility —Ö–∞–Ω–≥–∞–Ω–∞
- Frontend –¥—ç—ç—Ä `Storage::url()` facade –∞—à–∏–≥–ª–∞—Ö –Ω—å –∏–ª“Ø“Ø –Ω–∞–π–¥–≤–∞—Ä—Ç–∞–π
- LanguageTabs –∫–æ–º–ø–æ–Ω–µ–Ω—Ç pattern-–∏–π–≥ –¥–∞–≥–∞—Ö –Ω—å —á—É—Ö–∞–ª (locales prop + children function)
- –ó—É—Ä–≥–∏–π–Ω upload –¥—ç—ç—Ä CSRF token —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π

---

**–û–≥–Ω–æ–æ:** 2025-10-24
**–•”©–≥–∂“Ø“Ø–ª—ç–≥—á:** Claude + User Collaboration
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë“Ø—Ä—ç–Ω –î—É—É—Å—Å–∞–Ω & –¢—É—Ä—à–∏–≥–¥—Å–∞–Ω
